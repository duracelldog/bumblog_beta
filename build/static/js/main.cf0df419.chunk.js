(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{25:function(e,t,n){e.exports=n.p+"static/media/default_thumbnail.08a1cc29.jpg"},44:function(e,t,n){e.exports=n(82)},49:function(e,t,n){},66:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(21),r=n.n(o),l=(n(49),n(6)),i=n(4),u=n(7),s=n.n(u),m=n(19),d=(n(66),n(13)),b="auth/login",f={email:"",name:""};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case"auth/logout":return{email:t.payload.email,name:t.payload.name};default:return e}};var E=function(){var e=Object(d.c)((function(e){return e.auth})),t=Object(d.b)();return{authState:e,onLogin:Object(a.useCallback)((function(e){t(function(e){return{type:b,payload:{email:e.email,name:e.name}}}(e))}),[t]),onLogout:Object(a.useCallback)((function(){t({type:"auth/logout",payload:{email:"",name:""}})}),[t])}};var g=function(){var e=Object(i.g)(),t=Object(a.useRef)(null),n=Object(a.useRef)(null),o=E(),r=o.authState,u=o.onLogout,d=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(t.current)switch(n){case 0:t.current.classList.remove("on");break;case 1:t.current.classList.add("on");break;case 2:t.current.classList.toggle("on")}},b=function(){n.current&&(n.current.classList.add("on"),document.body.addEventListener("click",p))},f=function(){n.current&&(n.current.classList.remove("on"),document.body.removeEventListener("click",p))},p=function(e){console.log("bodyevent \uc2e4\ud589",e.srcElement.className);var t=!0;["bb-header__sub-menu-wrapper","bb-header__sub-menu_login-massage","bb-header__sub-menu-box-ul","bb-header__sub-menu-box-li"].forEach((function(n,a){e.srcElement.className!==n&&"icon-user"!==e.srcElement.className.baseVal||(t=!1)})),t&&f()};return Object(a.useEffect)((function(){window.addEventListener("resize",(function(){var e,a;null===(e=t.current)||void 0===e||e.classList.remove("on"),null===(a=n.current)||void 0===a||a.classList.remove("on")}))}),[]),c.a.createElement("nav",{className:"bb-header__nav"},c.a.createElement("div",{className:"bb-header__menu--desktop"},c.a.createElement("div",{className:"bb-header__mobile-menu-btn",onClick:function(e){return d(e,2)}},c.a.createElement(m.b,{className:"icon-menu"})),c.a.createElement("div",{className:"bb-header__logo-btn",onClick:function(e){return d(e,0)}},c.a.createElement(l.b,{className:"text-black ",to:"/"},"Bumblog")),c.a.createElement("div",{className:"bb-header__desktop-menu-wrapper"},c.a.createElement("ul",{className:"bb-header__desktop-menu"},c.a.createElement("li",null)),c.a.createElement("div",{className:"bb-header__sub-menu"},c.a.createElement("div",{className:"bb-header__sub-menu-icon",onClick:function(){n.current&&(n.current.classList.contains("on")?f():b())}},c.a.createElement(m.c,{className:"icon-user"})),c.a.createElement("div",{className:"bb-header__sub-menu-box",ref:n},c.a.createElement("div",{className:"edge-wrapper"},c.a.createElement("div",{className:"edge"})),c.a.createElement("div",{className:"bb-header__sub-menu-wrapper"},""!==r.name&&c.a.createElement("div",{className:"bb-header__sub-menu_login-massage"},"Signed\xa0in\xa0as",c.a.createElement("div",null,r.name)),c.a.createElement("ul",{className:"bb-header__sub-menu-box-ul"},""!==r.name?c.a.createElement("li",{className:"bb-header__sub-menu-box-li",onClick:function(){s()({method:"delete",url:"/api/auth/login"}).then((function(t){console.log("post_res",t.data),t.data.status&&(u(),e.push("/"))}))}},"Logout"):c.a.createElement("li",{className:"bb-header__sub-menu-box-li"},c.a.createElement(l.b,{to:"/login"},"Login")))))))),c.a.createElement("div",{className:"bb-header__mobile-menu-wrapper"},c.a.createElement("ul",{className:"bb-header__mobile-menu",ref:t},c.a.createElement("li",{onClick:function(e){return d(e,0)}},c.a.createElement(l.b,{to:"/board"},"MENU-1")),c.a.createElement("li",null,"MENU-2"),c.a.createElement("li",null,"MENU-3"),c.a.createElement("li",null,"MENU-4"))))};n(72);var v=function(){return c.a.createElement("footer",{className:"bb-common__footer"},c.a.createElement("div",{className:"bb-common__footer-contents-wrapper"},c.a.createElement("div",{className:"bb-common__footer-copyright"},c.a.createElement("div",null,"Copyright \xa9 2020 Bumblog Inc. All rights reserved")),c.a.createElement("div",{className:"text-bold"},"Bumblog")))},h=n(2),_=(n(73),n(17)),w="modal/close",N={status:!1,title:"",desc:"",confirm:{isShow:!1,func:function(){}}};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"modal/open":return{status:!0,title:t.payload.title,desc:t.payload.desc,confirm:{isShow:t.payload.confirm.isShow}};case"modal/open_confirm":return{status:!0,title:t.payload.title,desc:t.payload.desc,confirm:{isShow:t.payload.confirm.isShow,func:t.payload.confirm.func}};case w:return Object(_.a)(Object(_.a)({},e),{},{status:!1});default:return e}};var y=function(){var e=Object(d.c)((function(e){return e.modal})),t=Object(d.b)();return{modalState:e,onOpenAlertModal:Object(a.useCallback)((function(e){t(function(e){return{type:"modal/open",payload:{title:e.title,desc:e.desc,confirm:{isShow:!1}}}}(e))}),[t]),onOpenConfirmModal:Object(a.useCallback)((function(e){t(function(e){return{type:"modal/open_confirm",payload:{title:e.title,desc:e.desc,confirm:{isShow:e.confirm.isShow,func:e.confirm.func}}}}(e))}),[t]),onCloseModal:Object(a.useCallback)((function(){t({type:w})}),[t])}},j=n(5);function S(e){var t=e.data,n=y(),o=n.modalState,r=n.onCloseModal,l=Object(a.useRef)(null),i=Object(a.useState)(t),u=Object(h.a)(i,2),s=u[0],m=u[1];Object(a.useEffect)((function(){m(o)}),[o]);var d=function(){r()};return c.a.createElement("div",{className:"bb-modal__body ".concat(s.status&&"on"),ref:l},c.a.createElement("div",{className:"bb-modal__dim",onClick:d}),c.a.createElement("div",{className:"bb-modal__window"},c.a.createElement("div",{className:"bb-modal__window-close-btn",onClick:d},c.a.createElement(j.m,{className:"bb-modal__window-corss-icon"})),c.a.createElement("div",null,c.a.createElement("h2",{className:"bb-modal__window-title"},s.title),c.a.createElement("div",{className:"bb-modal__window-desc"},s.desc),c.a.createElement("div",{className:"bb-modal__window-btns ".concat(s.confirm.isShow&&"on")},c.a.createElement("button",{onClick:d},"\uc544\ub2c8\uc624"),c.a.createElement("button",{onClick:s.confirm.func},"\uc608")))))}S.defaultProps={data:{status:!1,title:"",desc:"",confirm:{isShow:!1}}};var k=S,C=n(24);n(74);var x=function(e){var t=Object(a.useState)({email:"",name:"",password:""}),n=Object(h.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)("LOGIN"),i=Object(h.a)(l,2),u=i[0],m=i[1],d=Object(a.useState)(""),b=Object(h.a)(d,2),f=b[0],p=b[1],E=Object(a.useRef)(null),g=function(e){var t;m(e),null===(t=E.current)||void 0===t||t.classList.toggle("on")},v=function(e){var t=e.target,n=t.name,a=t.value;r(Object(_.a)(Object(_.a)({},o),{},Object(C.a)({},n,a)))};return Object(a.useEffect)((function(){var e=new URLSearchParams(document.location.search).get("redirect");e&&p(e),console.log("redirectValue",e)}),[]),c.a.createElement("main",{className:"bb-login__main"},c.a.createElement("form",{className:"bb-login__form",onSubmit:function(t){t.preventDefault(),"LOGIN"===u?s()({method:"post",url:"/api/auth/login",withCredentials:!0,data:o}).then((function(t){console.log("post_res",t.data),""===f?e.history.goBack():e.history.push(f)})):s()({method:"post",url:"/api/auth/user",data:o}).then((function(e){console.log("post_res",e.data),r({email:"",name:"",password:""}),g("LOGIN")}))}},c.a.createElement("div",{className:"bb-login__form-title"},c.a.createElement("h2",{className:"text-black"},"Bumblog")),c.a.createElement("div",{className:"bb-login__input-wrapper"},c.a.createElement("input",{type:"text",name:"email",placeholder:"E-Mail",value:o.email,onChange:v}),"LOGIN"!==u&&c.a.createElement("input",{type:"text",name:"name",value:o.name,placeholder:"Name",onChange:v}),c.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:o.password,onChange:v})),c.a.createElement("div",{className:"bb-login__mode-toggle"},c.a.createElement("span",{className:"bb-login__toggle-bar",ref:E},u),c.a.createElement("div",{onClick:function(){return g("LOGIN")}},"Login"),c.a.createElement("div",{onClick:function(){return g("REGISTER")}},"Register")),c.a.createElement("button",{className:"bb-login__submit-button",type:"submit"},u)))};n(75);n(76);var L=n(16),T=n.n(L),I=(n(77),n(25)),D=n.n(I);var M=function(e){var t=e.data,n=Object(a.useState)([]),o=Object(h.a)(n,2),r=(o[0],o[1]),i=Object(a.useState)(""),u=Object(h.a)(i,2),s=u[0],m=u[1],d=Object(a.useState)(D.a),b=Object(h.a)(d,2),f=b[0],p=b[1],E=function(e){return 1===e.toString().length?"0"+e.toString():e.toString()};return Object(a.useEffect)((function(){r(t.tags),t.thumbnailImage.length>0&&p(T.a.resolve("./uploads",t.thumbnailImage[0].filename)),m(function(){var e=t._id.toString().substring(0,8),n=new Date(1e3*parseInt(e,16)),a=n.getUTCFullYear(),c=E(n.getUTCMonth()),o=E(n.getUTCDay());E(n.getUTCHours()),E(n.getUTCMinutes()),E(n.getUTCSeconds());return"".concat(a,".").concat(c,".").concat(o)}())}),[]),c.a.createElement("li",{className:"bb-board-list__body"},c.a.createElement(l.b,{to:"/board/view/".concat(t._id)},c.a.createElement("div",{className:"bb-board-list__contents-wrapper"},c.a.createElement("div",{className:"bb-board-list__article-wrapper"},c.a.createElement("div",null,c.a.createElement("div",{className:"bb-board-list__article-title"},t.title),c.a.createElement("div",{className:"bb-board-list__article-tags"},t.tags.map((function(e,t){return c.a.createElement("span",{key:t},e)})))),c.a.createElement("ul",{className:"bb-board-list__article-extra-info"},c.a.createElement("li",null,s),c.a.createElement("li",null,t.writer))),c.a.createElement("div",null,c.a.createElement("figure",{className:"bb-board-list__image",style:{backgroundImage:"url(".concat(f,")")}})))))};var R=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],o=t[1],r=function(e){document.querySelectorAll(".bb-board-home__tags-ul > li").forEach((function(e){e.classList.remove("on")})),e.currentTarget.classList.add("on");var t=e.currentTarget.innerText;i().then((function(e){if("\ubaa8\ub450"===t)o(e.data);else{var n=e.data.filter((function(e){return-1!==e.tags.indexOf(t)}));o(n)}}))},i=function(){return s()({method:"get",url:"/api/board/list"})};return Object(a.useEffect)((function(){i().then((function(e){o(e.data)})),window.scrollTo(0,0)}),[]),c.a.createElement("main",{className:"bb-board-home__main"},c.a.createElement("section",{className:"bb-board-home__hero-section"},c.a.createElement("div",null,c.a.createElement("h1",null,"Bumblog"),c.a.createElement("div",{className:"bb-board-home__hero-desc"},"\uc0dd\uac01\ub098\ub294 \uac83\uc744 \uae30\ub85d\ud558\uace0 \uc800\uc7a5\ud558\ub294 \uacf5\uac04"))),c.a.createElement("section",{className:"bb-board-home__tags-section"},c.a.createElement("div",null,c.a.createElement("ul",{className:"bb-board-home__tags-ul"},c.a.createElement("li",{className:"on",onClick:r},"\ubaa8\ub450"),c.a.createElement("li",{onClick:r},"\uac1c\ubc1c"),c.a.createElement("li",{onClick:r},"\uacf5\ubd80"),c.a.createElement("li",{onClick:r},"\uc0dd\uac01")))),c.a.createElement("section",{className:"bb-board-home__write-button-section"},c.a.createElement("div",{className:"bb-board-home__btns-wrapper"},c.a.createElement("div",null,"\xa0"),c.a.createElement("div",null,c.a.createElement(l.b,{className:"bb-board-home__icon-wrapper",to:"/board/write"},c.a.createElement(j.d,{className:"bb-board-home__write-icon"}),"\xa0\uae00\uc4f0\uae30")))),c.a.createElement("section",{className:"bb-board-home__list-section"},c.a.createElement("ul",{className:"bb-board-home__list-ul-tag"},n.map((function(e){return c.a.createElement(M,{key:e._id,data:e})})))))};n(78);var F=function(e){var t,n=y(),o=n.onOpenConfirmModal,r=n.onCloseModal,u=Object(a.useState)({_id:"",tags:[],title:"",description:"",writer:"",thumbnailImage:[],descriptionImage:[]}),m=Object(h.a)(u,2),d=m[0],b=m[1],f=Object(a.useState)(""),p=Object(h.a)(f,2),E=p[0],g=p[1],v=Object(i.g)();return Object(a.useEffect)((function(){var t;window.scrollTo(0,0),s()({method:"get",url:"/api/board/list/".concat(null===(t=e.match)||void 0===t?void 0:t.params.id)}).then((function(e){if(e.data){b(e.data);var t=e.data.thumbnailImage[0];g(t?T.a.resolve("./uploads",t.filename):D.a)}}))}),[]),c.a.createElement("main",{className:"bb-board-view__main"},c.a.createElement("section",{className:"bb-board-view__hero-section",style:{backgroundImage:"url(".concat(E,")")}},c.a.createElement("div",{className:"bb-board-view__hero-section-title-wrapper"},c.a.createElement("h1",null,null===d||void 0===d?void 0:d.title),c.a.createElement("div",{className:"bb-board-view__subtitle"}))),c.a.createElement("section",{className:"bb-board-view__article-section"},c.a.createElement("article",{className:"bb-board-view__article tui-editor-contents",dangerouslySetInnerHTML:{__html:d.description}})),c.a.createElement("section",{className:"bb-board-view__buttons-section"},c.a.createElement("ul",{className:"bb-board-view__update-btns"},c.a.createElement("li",null,c.a.createElement("button",null,c.a.createElement(l.b,{to:"/board/write/".concat(null===(t=e.match)||void 0===t?void 0:t.params.id)},c.a.createElement(j.d,{className:"bb-board-view__pencil-icon"})))),c.a.createElement("li",null,c.a.createElement("button",{onClick:function(){o({status:!0,title:"\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",desc:"\uc0ad\uc81c\ud55c \ub370\uc774\ud130\ub294 \ubcf5\uc6d0\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",confirm:{isShow:!0,func:function(){s()({method:"delete",url:"/api/board/list",data:d}).then((function(e){console.log("deleteRes",e.data),r(),v.push("/board")}))}}})}},c.a.createElement(j.h,{className:"bb-board-view__tresh-icon"}))))))},U=(n(79),n(43)),H=(n(80),n(42));var A=function(e){var t=e.textEditorContentsState,n=e.setTextEditorContentsState,o=e.textEditorImageState,r=e.setTextEditorImageState,l=e.textEditorImageFilesState,i=e.setTextEditorImageFilesState,u=y().onOpenConfirmModal,s=Object(a.useRef)(null),m=Object(a.useRef)(null),d=Object(a.useRef)(null),b=Object(a.useState)(0),f=Object(h.a)(b,2),p=f[0],E=f[1],g=Object(a.useState)(!0),v=Object(h.a)(g,2),_=v[0],w=v[1],N=function(e,t,n){O(n),k(e,t),S()},O=function(e){e&&e.currentTarget.classList.toggle("on")},S=function(){s.current&&s.current.contentDocument&&s.current.contentDocument.body.focus()},k=function(e,t){s.current&&s.current.contentDocument&&(""===t?s.current.contentDocument.execCommand(e):s.current.contentDocument.execCommand(e,!0,t))},C=function(e){if(_&&(x(),w(!1)),s.current&&s.current.contentDocument){var t=s.current.contentDocument;m.current&&m.current.childNodes.forEach((function(e){e.dataset.cmd&&(t.queryCommandState(e.dataset.cmd)?e.classList.add("on"):e.classList.remove("on"))}))}if("keyup"===e.type&&"Backspace"===e.key&&(o.forEach((function(e){var t,n;-1===(null===(t=s.current)||void 0===t||null===(n=t.contentDocument)||void 0===n?void 0:n.body.innerHTML.indexOf(e.filename))&&r(o.filter((function(t){return t.filename!==e.filename})))})),p>0))for(var a=function(e){var t,n;-1!==(null===(t=s.current)||void 0===t||null===(n=t.contentDocument)||void 0===n?void 0:n.body.innerHTML.indexOf("decriptionImgTag-".concat(e)))?console.log("\uc774\ubbf8\uc9c0\uac00 \uc788\ub2e4.!!"):(console.log("\uc774\ubbf8\uc9c0\uac00 \uc5c6\ub2e4.!!",l),document.querySelectorAll(".decriptionInputFileTag-".concat(e))&&(document.querySelectorAll(".decriptionInputFileTag-".concat(e))[0].value=""),l.length>0&&i(l.filter((function(t,n){return n+1!==e}))))},c=1;c<=p;c++)a(c);n(D())},x=function(){s.current&&s.current.contentDocument&&(s.current.contentDocument.body.innerHTML="")},L=function(e){if(e.currentTarget.files){var t=e.currentTarget.files[0];t&&(!1===I(t.type)?(u({status:!0,title:"\uc774\ubbf8\uc9c0 \uc624\ub958",desc:"jpeg, png, jpg \ud30c\uc77c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.",confirm:{isShow:!1}}),0!==p&&E(p-1),e.currentTarget.value=""):(T(t),i(null===l?[t]:l.concat(t))))}},T=function(e){var t=new FileReader;t.onload=function(e){var t;if(null===(t=e.target)||void 0===t?void 0:t.result){var a,c,o="<img width='100%' height='auto' class=\".decriptionImgTag-".concat(p,'" src="').concat(e.target.result.toString(),'" />');null===(a=s.current)||void 0===a||null===(c=a.contentDocument)||void 0===c||c.execCommand("InsertHTML",!1,o),n(D())}},t.readAsDataURL(e),S()},I=function(e){return-1!==["image/jpeg","image/png","image/jpg"].indexOf(e)},D=function(){var e,t,n,a=null===(e=s.current)||void 0===e||null===(t=e.contentDocument)||void 0===t?void 0:t.body.innerHTML;return(a=null===(n=a)||void 0===n?void 0:n.replace(/([0-9]\"\s)src=\".*?\"/gi,"$1"))||""};return Object(a.useEffect)((function(){!function(){if(s.current&&s.current.contentDocument){s.current.contentDocument.designMode="on",s.current.contentDocument.head.innerHTML='<style>\n                @import url("https://fonts.googleapis.com/earlyaccess/notosanskr.css");\n            </style>',s.current.contentDocument.body.style.fontFamily="Noto Sans KR",s.current.contentDocument.body.style.fontWeight="400",s.current.contentDocument.body.style.margin="0px";s.current.contentDocument.body.innerHTML="<div style='color: grey;'>\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.</div>"}}(),window.scrollTo(0,0)}),[]),Object(a.useEffect)((function(){s.current&&s.current.contentDocument&&""!==t&&_&&(s.current.contentDocument.body.innerHTML=t,w(!1))}),[t]),Object(a.useEffect)((function(){return s.current&&s.current.contentWindow&&(s.current.contentWindow.addEventListener("keyup",C),s.current.contentWindow.addEventListener("click",C)),function(){s.current&&s.current.contentWindow&&(s.current.contentWindow.removeEventListener("keyup",C),s.current.contentWindow.removeEventListener("click",C))}}),[l,o,_]),c.a.createElement("div",{className:"bb-board-write__editor-wrapper"},Object(U.a)(Array(p)).map((function(e,t){return c.a.createElement("input",{key:t,className:"decriptionInputFileTag-".concat(t+1),type:"file",onChange:L})})),c.a.createElement("ul",{className:"bb-board-write__editor-options",ref:m},c.a.createElement("li",{onClick:function(){d.current&&d.current.classList.toggle("on")}},c.a.createElement(H.a,null),c.a.createElement("ul",{className:"bb-board-write__editor-font-box",ref:d},c.a.createElement("li",{onClick:function(e){return N("fontSize","1")}},"10px"),c.a.createElement("li",{onClick:function(e){return N("fontSize","2")}},"13px"),c.a.createElement("li",{onClick:function(e){return N("fontSize","3")}},"16px"),c.a.createElement("li",{onClick:function(e){return N("fontSize","4")}},"18px"),c.a.createElement("li",{onClick:function(e){return N("fontSize","5")}},"24px"),c.a.createElement("li",{onClick:function(e){return N("fontSize","6")}},"32px"),c.a.createElement("li",{onClick:function(e){return N("fontSize","7")}},"48px"))),c.a.createElement("li",{"data-cmd":"bold",onClick:function(e){return N("bold","",e)}},c.a.createElement(j.i,null)),c.a.createElement("li",{"data-cmd":"italic",onClick:function(e){return N("italic","",e)}},c.a.createElement(j.j,null)),c.a.createElement("li",{"data-cmd":"underline",onClick:function(e){return N("underline","",e)}},c.a.createElement(j.l,null)),c.a.createElement("li",{"data-cmd":"strikethrough",onClick:function(e){return N("strikethrough","",e)}},c.a.createElement(j.k,null)),c.a.createElement("li",{"data-cmd":"justifycenter",onClick:function(e){return N("justifycenter","",e)}},c.a.createElement(j.e,null)),c.a.createElement("li",{className:"small-hidden",onClick:function(e){return N("insertunorderedlist","")}},c.a.createElement(j.c,null)),c.a.createElement("li",{className:"small-hidden",onClick:function(e){return N("insertorderedlist","")}},c.a.createElement(j.b,null)),c.a.createElement("li",{className:"small-hidden",onClick:function(e){return N("indent","")}},c.a.createElement(j.f,null)),c.a.createElement("li",{className:"small-hidden",onClick:function(e){return N("outdent","")}},c.a.createElement(j.g,null)),c.a.createElement("li",{onClick:function(){E(p+1),setTimeout((function(){var e;null===(e=document.querySelector(".decriptionInputFileTag-".concat(p+1)))||void 0===e||e.click()}),10)}},c.a.createElement(j.a,null))),c.a.createElement("iframe",{className:"bb-board-wrtie__editor",name:"boadeditrot",ref:s}))};var B=function(e){var t=Object(i.g)(),n=E().authState,o=y(),r=o.onOpenConfirmModal,l=o.onCloseModal,u=Object(a.useRef)(null),m=Object(a.useRef)(null),d=Object(a.useRef)(null),b=Object(a.useState)(""),f=Object(h.a)(b,2),p=f[0],g=f[1],v=Object(a.useState)([]),_=Object(h.a)(v,2),w=_[0],N=_[1],O=Object(a.useState)(""),S=Object(h.a)(O,2),k=S[0],C=S[1],x=Object(a.useState)(""),L=Object(h.a)(x,2),I=L[0],D=L[1],M=Object(a.useState)([]),R=Object(h.a)(M,2),F=R[0],U=R[1],H=Object(a.useState)([]),B=Object(h.a)(H,2),W=B[0],z=B[1],q=Object(a.useState)(""),G=Object(h.a)(q,2),J=G[0],P=G[1],V=Object(a.useState)([]),$=Object(h.a)(V,2),K=$[0],Y=$[1],Q=Object(a.useState)([]),X=Object(h.a)(Q,2),Z=X[0],ee=X[1];Object(a.useEffect)((function(){var t,n=null===(t=e.match)||void 0===t?void 0:t.params.id;console.log("match",n),n&&(C(n),function(t){var n;s()({method:"get",url:"/api/board/list/".concat(null===(n=e.match)||void 0===n?void 0:n.params.id)}).then((function(e){console.log("res",e.data),g(e.data.title),N(""===e.data.tags[0]?[]:e.data.tags),U(e.data.thumbnailImage),Y(e.data.descriptionImage),ne(e.data.tags),e.data.thumbnailImage.length>0&&D(T.a.resolve("./uploads",e.data.thumbnailImage[0].filename)),P(e.data.description)}))}()),window.scrollTo(0,0)}),[]);var te=function(e){console.log("\ud074\ub9ad");var t=e.currentTarget.classList,n=e.currentTarget.innerText;t.contains("on")?(t.remove("on"),-1!==w.indexOf(n)&&N(w.filter((function(e){return e!==n})))):(t.add("on"),-1===w.indexOf(n)&&N(w.concat(n)))},ne=function(e){document.querySelectorAll(".bb-board-write__tags-wrapper > span").forEach((function(t){e.forEach((function(e){e===t.innerHTML&&t.classList.add("on")}))}))},ae=function(e){var t=new FileReader;t.onload=function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.result)&&D(e.target.result.toString())},t.readAsDataURL(e)},ce=function(e){return-1!==["image/jpeg","image/png","image/jpg"].indexOf(e)};return c.a.createElement("main",{className:"bb-board-write__main"},""!==n.email?c.a.createElement("section",{className:"bb-board-write__form-section"},c.a.createElement("form",{className:"bb-board-write__form",onSubmit:function(e){if(e.preventDefault(),function(e){var t=!0;return e.some((function(e){if(console.log("item",e),""===e.target||-1!==e.target.indexOf("\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."))return r({status:!0,title:"".concat(e.type," \uc624\ub958"),desc:"".concat(e.type,"\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694."),confirm:{isShow:!0,func:function(){var t,n,a;switch(l(),e.type){case"\uc81c\ubaa9":null===(t=d.current)||void 0===t||t.focus();break;case"\ubcf8\ubb38":(null===(n=u.current)||void 0===n?void 0:n.contentDocument)&&(null===(a=u.current)||void 0===a||a.contentDocument.body.focus())}}}}),t=!1,!0})),t}([{type:"\uc81c\ubaa9",target:p},{type:"\ud0dc\uadf8",target:w.toString()},{type:"\ubcf8\ubb38",target:J}])){var n=function(e){var t=new FormData;return t.append("title",p),t.append("tags",JSON.stringify(w)),t.append("description",J),t.append("writer","\uc2e0\ubc94\uadfc"),""==e?(W&&W.forEach((function(e){e&&t.append("thumbnailImageFile",e)})),Z&&Z.forEach((function(e){e&&t.append("descriptionImageFile",e)}))):(t.append("_id",e),t.append("thumbnailImage",JSON.stringify(F)),t.append("descriptionImage",JSON.stringify(K)),W&&W.forEach((function(e){e&&t.append("thumbnailImageFile",e)})),Z&&Z.forEach((function(e){e&&t.append("descriptionImageFile",e)}))),t}(k);""===k?s()({headers:{"Content-Type":"multipart/form-data"},method:"post",url:"/api/board/list",data:n}).then((function(e){console.log("post_res",e.data[0]),t.push("/board")})):s()({headers:{"Content-Type":"multipart/form-data"},method:"put",url:"/api/board/list",data:n}).then((function(e){console.log("put_res",e.data[0]),t.push("/board/view?_id="+k)})),g(""),U([]),z([]),Y([]),ee([]),P("")}}},c.a.createElement("input",{className:"bb-board-write__title",ref:d,placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",type:"text",name:"title",value:p,onChange:function(e){var t=e.target,n=(t.name,t.value);g(n)}}),c.a.createElement("div",{className:"bb-board-write__tags-wrapper"},c.a.createElement("span",{onClick:te},"\uac1c\ubc1c"),c.a.createElement("span",{onClick:te},"\uacf5\ubd80"),c.a.createElement("span",{onClick:te},"\uc0dd\uac01")),c.a.createElement(A,{textEditorContentsState:J,setTextEditorContentsState:P,textEditorImageState:K,setTextEditorImageState:Y,textEditorImageFilesState:Z,setTextEditorImageFilesState:ee}),c.a.createElement("div",{className:"bb-board-write__image-tiles ".concat(""!==I&&"on")},c.a.createElement("span",{style:{backgroundImage:"url(".concat(I,")")},onClick:function(){D(""),U([]),z([])}},c.a.createElement(j.m,null))),c.a.createElement("div",{className:"bb-board-write__image-upload-btn"},c.a.createElement("input",{type:"file",ref:m,onChange:function(e){if(e.currentTarget.files){var t=e.currentTarget.files[0];t&&(!1===ce(t.type)?(r({status:!0,title:"\uc774\ubbf8\uc9c0 \uc624\ub958",desc:"jpeg, png, jpg \ud30c\uc77c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.",confirm:{isShow:!1}}),e.currentTarget.value="",z([])):(ae(t),z(W.concat(t))))}}}),c.a.createElement("button",{type:"button",onClick:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.click()}},"\uc378\ub124\uc77c \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc")),c.a.createElement("div",{className:"bb-board-write__buttons"},c.a.createElement("button",{type:"button",onClick:function(){return t.push("/board")}},"\ucde8\uc18c"),c.a.createElement("button",{type:"submit"},"\uc644\ub8cc")))):c.a.createElement(i.a,{to:"/login?redirect=/board"}))};n(81);var W=function(){var e=E().onLogin;return Object(a.useEffect)((function(){s()({method:"get",url:"/api/auth/check"}).then((function(t){if(console.log("post_res",t.data),t.data.status){var n={email:t.data.info.email,name:t.data.info.name};e(n)}}))}),[]),c.a.createElement("div",{className:"bb-body"},c.a.createElement(l.a,null,c.a.createElement(g,null),c.a.createElement(k,null),c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/",component:R}),c.a.createElement(i.b,{path:"/login",component:x}),c.a.createElement(i.b,{path:"/board/write/:id",component:B}),c.a.createElement(i.b,{path:"/board/write",component:B}),c.a.createElement(i.b,{path:"/board/view/:id",component:F}),c.a.createElement(i.b,{path:"/board",component:R})),c.a.createElement(v,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(15),q=Object(z.b)({modal:O,auth:p}),G=Object(z.c)(q);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d.a,{store:G},c.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.cf0df419.chunk.js.map